/*!
  Tinycon - A small library for manipulating the Favicon
  Tom Moor, http://tommoor.com
  Copyright (c) 2012 Tom Moor
  @license MIT Licensed
  @version 0.6.3
*/
!function(){var e={},t=null,n=null,i=null,r=null,o={},a=window.devicePixelRatio||1,l=16*a,c={width:7,height:9,font:10*a+"px arial",colour:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},u=function(){var e=navigator.userAgent.toLowerCase();return function(t){return-1!==e.indexOf(t)}}(),f={ie:u("msie"),chrome:u("chrome"),webkit:u("chrome")||u("safari"),safari:u("safari")&&!u("chrome"),mozilla:u("mozilla")&&!u("chrome")&&!u("safari")},m=function(){for(var e=document.getElementsByTagName("link"),t=0,n=e.length;n>t;t++)if((e[t].getAttribute("rel")||"").match(/\bicon\b/))return e[t];return!1},d=function(){for(var e=document.getElementsByTagName("link"),t=document.getElementsByTagName("head")[0],n=0,i=e.length;i>n;n++){var r=void 0!==e[n];r&&(e[n].getAttribute("rel")||"").match(/\bicon\b/)&&t.removeChild(e[n])}},g=function(){if(!n||!t){var e=m();n=t=e?e.getAttribute("href"):"/favicon.ico"}return t},h=function(){return r||(r=document.createElement("canvas"),r.width=l,r.height=l),r},s=function(e){d();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},b=function(e,t){if(!h().getContext||f.ie||f.safari||"force"===o.fallback)return v(e);var n=h().getContext("2d"),t=t||"#000000",r=g();i=document.createElement("img"),i.onload=function(){n.clearRect(0,0,l,l),n.drawImage(i,0,0,i.width,i.height,0,0,l,l),(e+"").length>0&&k(n,e,t),T()},!r.match(/^data/)&&o.crossOrigin&&(i.crossOrigin="anonymous"),i.src=r},v=function(e){if(o.fallback){var t=document.title;"("===t[0]&&(t=t.slice(t.indexOf(" "))),document.title=(e+"").length>0?"("+e+") "+t:t}},k=function(e,t){"number"==typeof t&&t>99&&o.abbreviate&&(t=w(t));var n=(t+"").length-1,i=o.width*a+6*a*n,r=o.height*a,c=l-r,u=l-i-a,m=16*a,d=16*a,g=2*a;e.font=(f.webkit?"bold ":"")+o.font,e.fillStyle=o.background,e.strokeStyle=o.background,e.lineWidth=a,e.beginPath(),e.moveTo(u+g,c),e.quadraticCurveTo(u,c,u,c+g),e.lineTo(u,m-g),e.quadraticCurveTo(u,m,u+g,m),e.lineTo(d-g,m),e.quadraticCurveTo(d,m,d,m-g),e.lineTo(d,c+g),e.quadraticCurveTo(d,c,d-g,c),e.closePath(),e.fill(),e.beginPath(),e.strokeStyle="rgba(0,0,0,0.3)",e.moveTo(u+g/2,m),e.lineTo(d-g/2,m),e.stroke(),e.fillStyle=o.colour,e.textAlign="right",e.textBaseline="top",e.fillText(t,2===a?29:15,f.mozilla?7*a:6*a)},T=function(){h().getContext&&s(h().toDataURL())},w=function(e){for(var t=[["G",1e9],["M",1e6],["k",1e3]],n=0;n<t.length;++n)if(e>=t[n][1]){e=y(e/t[n][1])+t[n][0];break}return e},y=function(e,t){var n=new Number(e);return n.toFixed(t)};e.setOptions=function(e){o={};for(var t in c)o[t]=e.hasOwnProperty(t)?e[t]:c[t];return this},e.setImage=function(e){return g(),t=e,T(),this},e.setBubble=function(e,t){return e=e||"",b(e,t),this},e.reset=function(){g(),s(n)},e.setOptions(c),window.Tinycon=e,"function"==typeof define&&define.amd&&define(e)}();
