/*!
 * Tinycon - A small library for manipulating the Favicon
 * Tom Moor, http://tommoor.com
 * Copyright (c) 2015 Tom Moor
 * @license MIT Licensed
*/ !function(){var e,t={},n=null,i=null,r=null,o=null,a={},l=Math.ceil(window.devicePixelRatio)||1,c=16*l,f={width:7,height:9,font:10*l+"px arial",color:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0,path:"/favicon.ico"},u=(e=navigator.userAgent.toLowerCase(),function(t){return -1!==e.indexOf(t)}),$={ie:u("trident"),chrome:u("chrome"),webkit:u("chrome")||u("safari"),safari:u("safari")&&!u("chrome"),mozilla:u("mozilla")&&!u("chrome")&&!u("safari")},h=function(){for(var e=document.getElementsByTagName("link"),t=0,n=e.length;t<n;t++)if((e[t].getAttribute("rel")||"").match(/\bicon\b/i))return e[t];return!1},g=function(){for(var e=document.getElementsByTagName("link"),t=0,n=e.length;t<n;t++)void 0!==e[t]&&(e[t].getAttribute("rel")||"").match(/\bicon\b/i)&&e[t].parentNode.removeChild(e[t])},s=function(){if(!i||!n){var e=h();n=e?e.getAttribute("href"):a.path,i||(i=n)}return n},d=function(){return o||((o=document.createElement("canvas")).width=c,o.height=c),o},m=function(e){if(e){g();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}},b=function(e,t){if(!d().getContext||$.ie||$.safari||"force"===a.fallback)return v(e);var n=d().getContext("2d"),t=t||"#000000",i=s();(r=document.createElement("img")).onload=function(){n.clearRect(0,0,c,c),n.drawImage(r,0,0,r.width,r.height,0,0,c,c),(e+"").length>0&&k(n,e,t),p()},!i.match(/^data/)&&a.crossOrigin&&(r.crossOrigin="anonymous"),r.src=i},v=function(e){if(a.fallback){var t=document.title;"("===t[0]&&(t=t.slice(t.indexOf(" "))),(e+"").length>0?document.title="("+e+") "+t:document.title=t}},k=function(e,t,n){"number"==typeof t&&t>99&&a.abbreviate&&(t=T(t));var i=(t+"").length-1,r=a.width*l+6*l*i,o=c-a.height*l,f=c-r-l,u=16*l,h=16*l,g=2*l;e.font=($.webkit?"bold ":"")+a.font,e.fillStyle=a.background,e.strokeStyle=a.background,e.lineWidth=l,e.beginPath(),e.moveTo(f+g,o),e.quadraticCurveTo(f,o,f,o+g),e.lineTo(f,u-g),e.quadraticCurveTo(f,u,f+g,u),e.lineTo(h-g,u),e.quadraticCurveTo(h,u,h,u-g),e.lineTo(h,o+g),e.quadraticCurveTo(h,o,h-g,o),e.closePath(),e.fill(),e.beginPath(),e.strokeStyle="rgba(0,0,0,0.3)",e.moveTo(f+g/2,u),e.lineTo(h-g/2,u),e.stroke(),e.fillStyle=a.color,e.textAlign="right",e.textBaseline="top",e.fillText(t,2===l?29:15,$.mozilla?7*l:6*l)},p=function(){d().getContext&&m(d().toDataURL())},T=function(e){for(var t=[["G",1e9],["M",1e6],["k",1e3]],n=0;n<t.length;++n)if(e>=t[n][1]){e=y(e/t[n][1])+t[n][0];break}return e},y=function(e,t){return new Number(e).toFixed(t)};t.setOptions=function(e){for(var t in a={},e.colour&&(e.color=e.colour),f)a[t]=e.hasOwnProperty(t)?e[t]:f[t];return this},t.setImage=function(e){return n=e,p(),this},t.setBubble=function(e,t){return b(e=e||"",t),this},t.reset=function(){n=i,m(i)},t.setOptions(f),"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module?module.exports=t:window.Tinycon=t}();